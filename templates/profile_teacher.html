{% extends "profile.html" %}
{%load static%}

{% block interface %}
    <div class="buttons">
        <form>
            <select class="link" name="get_practices">
                {% if groups_list %}
                    <option onclick="location.reload()">Непривязанные</option>
                    <option onclick="location.reload()">Все</option>
                    {% for group in groups_list %}
                        <option><div onclick="location.reload()">{{ group }}</div></option>
                    {% endfor %}
                {%else%}
                    <option>Вы не ведете ни у одной группы</option>
                {% endif %}
            </select>
            <button type="submit" class="link">Практики</button>
        </form>
        <a href="./create_practice">
            <img class="link img" src="{% static "/img/instruments.png" %}" alt="instruments" height="50">
            <p class="link">Создать практику</p>
        </a>
    </div>
    <div class="practices">
        {%if practice_list%}
            <p class="group_attachment">{{group_attachment}}</p>
            <table>
                {% for practice in practice_list %}
                    <tr>
                        <td class="practice_name"><a href="./show_practice/{{practice.id_practice}}" id="{{practice.id_practice}}">{{practice.name}}</td>
                        <td>
                            <form method="post" class="buttons">{% csrf_token %}
                                {% if practice.id_practice in attached_practices%}
                                    <div class="unattach rename_remove">
                                        <button class="link manage" onclick="unattach({{practice.id_practice}},this)">Отвязать</button>
                                {%else%}
                                    <div class="attach">
                                        <button class="link manage" onclick="attach({{practice.id_practice}},this)">Привязать</button>
                                        <select class="link manage">
                                            {% if groups_list %}
                                                <option>Группа</option>
                                                {% for group in groups_list %}
                                                    <option>{{ group }}</option>
                                                {% endfor %}
                                            {%else%}
                                                <option>Вы не ведете ни у одной группы</option>
                                            {% endif %}
                                        </select>
                                        <input type=date class="link manage" min="{{today}}">
                                    </div>
                                    <div class="rename_remove">
                                {%endif%}
                                        <button class="link manage" onclick="rename({{practice.id_practice}},this)">Переименовать</button>
                                        <button class="link manage" onclick="remove({{practice.id_practice}},this)">Удалить</button>
                                    </div>
                            </form>    
                        </td>
                    </tr>
                {% endfor %}
            </table>
        {%else%}
            <p class="group_attachment">Практик по запросу нет</p>
        {%endif%}
    </div>
{% endblock interface %}